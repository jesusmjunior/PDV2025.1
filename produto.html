<div class="form-group" style="margin-bottom: 0;">
                  <select id="filtro-grupo" class="form-control" style="width: 150px;">
                    <option value="">Todos os Grupos</option>
                    <!-- Preenchido via JavaScript -->
                  </select>
                </div>
                <div style="position: relative;">
                  <input type="text" id="busca-produto" class="form-control" placeholder="Buscar produto..." style="width: 200px; padding-left: 36px;">
                  <i class="fas fa-search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-muted);"></i>
                </div>
                <button id="btn-novo-produto" class="btn btn-primary">
                  <i class="fas fa-plus"></i> Novo
                </button>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="table-container">
              <table class="table" id="tabela-produtos">
                <thead>
                  <tr>
                    <th>Código</th>
                    <th>Nome</th>
                    <th>Grupo</th>
                    <th>Preço</th>
                    <th>Estoque</th>
                    <th>Ações</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Preenchido via JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        <!-- Formulário de produto -->
        <div class="card" id="card-formulario">
          <div class="card-header">
            <i class="fas fa-box"></i> <span id="form-titulo">Novo Produto</span>
          </div>
          <div class="card-body">
            <form id="form-produto">
              <input type="hidden" id="produto-id">
              
              <div class="form-group">
                <label for="codigo-barras" class="form-label">Código de Barras</label>
                <div style="display: flex; gap: 0.5rem;">
                  <input type="text" id="codigo-barras" class="form-control" required>
                  <button type="button" id="btn-gerar-codigo" class="btn btn-outline-primary" title="Gerar código">
                    <i class="fas fa-barcode"></i>
                  </button>
                  <button type="button" id="btn-scanner-codigo" class="btn btn-outline-primary" title="Escanear código">
                    <i class="fas fa-camera"></i>
                  </button>
                </div>
              </div>
              
              <div class="form-group">
                <label for="nome" class="form-label">Nome do Produto</label>
                <input type="text" id="nome" class="form-control" required>
              </div>
              
              <div class="form-group">
                <label for="grupo" class="form-label">Grupo</label>
                <div style="display: flex; gap: 0.5rem;">
                  <select id="grupo" class="form-control" required>
                    <!-- Preenchido via JavaScript -->
                  </select>
                  <button type="button" id="btn-novo-grupo" class="btn btn-outline-primary" title="Novo Grupo">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
              </div>
              
              <div class="form-group">
                <label for="marca" class="form-label">Marca</label>
                <div style="display: flex; gap: 0.5rem;">
                  <select id="marca" class="form-control">
                    <!-- Preenchido via JavaScript -->
                  </select>
                  <button type="button" id="btn-nova-marca" class="btn btn-outline-primary" title="Nova Marca">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
              </div>
              
              <div class="form-group">
                <label for="preco" class="form-label">Preço de Venda (R$)</label>
                <input type="number" id="preco" class="form-control" step="0.01" min="0.01" required>
              </div>
              
              <div class="form-group">
                <label for="estoque" class="form-label">Estoque Atual</label>
                <input type="number" id="estoque" class="form-control" min="0" step="1" required>
              </div>
              
              <div class="form-group">
                <label for="estoque-minimo" class="form-label">Estoque Mínimo</label>
                <input type="number" id="estoque-minimo" class="form-control" min="0" step="1" required>
              </div>
              
              <div class="form-group">
                <label for="foto" class="form-label">URL da Imagem (opcional)</label>
                <input type="text" id="foto" class="form-control" placeholder="https://...">
              </div>
              
              <div style="display: flex; gap: 0.5rem; margin-top: 1.5rem;">
                <button type="button" id="btn-cancelar" class="btn btn-outline-primary" style="flex: 1;">
                  Cancelar
                </button>
                <button type="submit" class="btn btn-primary" style="flex: 1;">
                  Salvar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Modal para novo grupo/marca -->
      <div id="modal-adicionar" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div class="modal-content" style="background-color: var(--dark-surface); width: 400px; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
          <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h3 id="modal-titulo">Adicionar Novo</h3>
            <button type="button" class="btn-close-modal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-muted);">&times;</button>
          </div>
          <div class="card-body">
            <form id="form-modal">
              <div class="form-group">
                <label for="novo-item" class="form-label" id="modal-label">Nome</label>
                <input type="text" id="novo-item" class="form-control" required>
              </div>
              
              <div style="display: flex; justify-content: flex-end; gap: 0.5rem; margin-top: 1.5rem;">
                <button type="button" class="btn-close-modal btn btn-outline-primary">
                  Cancelar
                </button>
                <button type="submit" class="btn btn-primary">
                  Adicionar
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
      
      <!-- Modal para scanner de código de barras -->
      <div id="modal-scanner" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div class="modal-content" style="background-color: var(--dark-surface); width: 500px; max-width: 90%; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
          <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h3>Scanner de Código de Barras</h3>
            <button type="button" class="btn-close-scanner" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-muted);">&times;</button>
          </div>
          <div class="card-body">
            <div class="alert" style="background-color: rgba(30, 136, 229, 0.1); border: 1px solid rgba(30, 136, 229, 0.3); color: var(--primary); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 1rem;">
              <p style="margin: 0;"><i class="fas fa-info-circle"></i> Posicione o código de barras em frente à câmera para escanear.</p>
            </div>
            
            <div id="camera-container" style="margin-bottom: 1rem;">
              <video id="scanner-video" style="width: 100%; border-radius: var(--border-radius);"></video>
            </div>
            
            <div style="display: flex; justify-content: center; gap: 0.5rem;">
              <button type="button" class="btn-close-scanner btn btn-outline-primary">
                Cancelar
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Scripts -->
  <script src="assets/js/database.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>

  <!-- Script que contém todo o código integrado -->
  <script>
    // assets/js/produto.js - Integração completa
    document.addEventListener('DOMContentLoaded', function() {
      // Verificar autenticação
      if (!auth.verificarAutenticacao()) {
        window.location.href = 'index.html';
        return;
      }
      
      // Elementos DOM
      const buscaProdutoInput = document.getElementById('busca-produto');
      const filtroGrupoSelect = document.getElementById('filtro-grupo');
      const tabelaProdutos = document.getElementById('tabela-produtos');
      const formProduto = document.getElementById('form-produto');
      const cardFormulario = document.getElementById('card-formulario');
      const formTitulo = document.getElementById('form-titulo');
      const produtoIdInput = document.getElementById('produto-id');
      const codigoBarrasInput = document.getElementById('codigo-barras');
      const nomeInput = document.getElementById('nome');
      const grupoSelect = document.getElementById('grupo');
      const marcaSelect = document.getElementById('marca');
      const precoInput = document.getElementById('preco');
      const estoqueInput = document.getElementById('estoque');
      const estoqueMinimoInput = document.getElementById('estoque-minimo');
      const fotoInput = document.getElementById('foto');
      const btnNovoGrupo = document.getElementById('btn-novo-grupo');
      const btnNovaMarca = document.getElementById('btn-nova-marca');
      const btnNovoProduto = document.getElementById('btn-novo-produto');
      const btnCancelar = document.getElementById('btn-cancelar');
      const btnGerarCodigo = document.getElementById('btn-gerar-codigo');
      const btnScannerCodigo = document.getElementById('btn-scanner-codigo');
      
      // Modal
      const modalAdicionar = document.getElementById('modal-adicionar');
      const modalTitulo = document.getElementById('modal-titulo');
      const modalLabel = document.getElementById('modal-label');
      const novoItemInput = document.getElementById('novo-item');
      const formModal = document.getElementById('form-modal');
      const btnCloseModal = document.querySelectorAll('.btn-close-modal');
      
      // Modal Scanner
      const modalScanner = document.getElementById('modal-scanner');
      const btnCloseScanner = document.querySelectorAll('.btn-close-scanner');
      const scannerVideo = document.getElementById('scanner-video');
      
      // Variáveis de controle
      let modoEdicao = false;
      let tipoModal = '';
      let scannerAtivo = false;
      let barcodeScanner = null;
      
      // Dados do usuário
      const user = auth.getUsuarioAtual();
      document.getElementById('user-name').textContent = user.nome;
      
      // Data atual
      const dataAtual = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('current-date').textContent = dataAtual.toLocaleDateString('pt-BR', options);
      
      // Inicializar scanner de código de barras
      initBarcodeScanner();
      
      // Carregar dados iniciais
      carregarGrupos();
      carregarMarcas();
      carregarProdutos();
      
      // Verificar se tem parâmetro na URL para edição de produto
      const urlParams = new URLSearchParams(window.location.search);
      const idProduto = urlParams.get('id');
      if (idProduto) {
        editarProduto(idProduto);
      }
      
      // Event Listeners
      buscaProdutoInput.addEventListener('input', carregarProdutos);
      filtroGrupoSelect.addEventListener('change', carregarProdutos);
      formProduto.addEventListener('submit', salvarProduto);
      btnNovoProduto.addEventListener('click', novoProduto);
      btnCancelar.addEventListener('click', cancelarFormulario);
      btnGerarCodigo.addEventListener('click', gerarCodigoBarras);
      
      // Scanner de código de barras
      if (btnScannerCodigo) {
        btnScannerCodigo.addEventListener('click', abrirScannerCodigo);
      }
      
      if (btnCloseScanner) {
        btnCloseScanner.forEach(btn => {
          btn.addEventListener('click', fecharScannerCodigo);
        });
      }
      
      btnNovoGrupo.addEventListener('click', function() {
        abrirModal('grupo');
      });
      
      btnNovaMarca.addEventListener('click', function() {
        abrirModal('marca');
      });
      
      btnCloseModal.forEach(btn => {
        btn.addEventListener('click', function() {
          modalAdicionar.style.display = 'none';
        });
      });
      
      formModal.addEventListener('submit', function(e) {
        e.preventDefault();
        salvarItemModal();
      });
      
      // Validação de código de barras
      codigoBarrasInput.addEventListener('blur', function() {
        validarCodigoBarras(this.value);
      });
      
      // Logout
      document.getElementById('btn-logout').addEventListener('click', function() {
        auth.fazerLogout();
        window.location.href = 'index.html';
      });
      
      // Função para inicializar o scanner de código de barras
      function initBarcodeScanner() {
        // Verificar se o elemento do scanner e a biblioteca Quagga existem
        if (!scannerVideo || typeof Quagga === 'undefined') {
          console.warn('Scanner de código de barras não disponível: elementos DOM ou biblioteca não encontrados');
          return;
        }
        
        // Criar instância do scanner
        barcodeScanner = {
          start: function() {
            if (scannerAtivo) return;
            
            scannerAtivo = true;
            
            Quagga.init({
              inputStream: {
                name: "Live",
                type: "LiveStream",
                target: scannerVideo,
                constraints: {
                  width: 480,
                  height: 320,
                  facingMode: "environment"
                },
              },
              decoder: {
                readers: [
                  "code_128_reader",
                  "ean_reader",
                  "ean_8_reader",
                  "code_39_reader",
                  "code_39_vin_reader",
                  "codabar_reader",
                  "upc_reader",
                  "upc_e_reader",
                  "i2of5_reader"
                ]
              },
            }, function(err) {
              if (err) {
                console.error(err);
                exibirMensagem("Erro ao inicializar o scanner: " + err, "error");
                scannerAtivo = false;
                return;
              }
              
              console.log("Scanner inicializado com sucesso!");
              
              // Iniciar scanner
              Quagga.start();
              
              // Detectar código de barras
              Quagga.onDetected(function(result) {
                // Obter código lido
                const code = result.codeResult.code;
                
                // Parar scanner
                barcodeScanner.stop();
                
                // Preencher campo de código
                codigoBarrasInput.value = code;
                
                // Verificar se o produto já existe
                const produto = db.getProdutoPorCodigoBarras(code);
                if (produto) {
                  // Se o produto já existe, carrega para edição
                  editarProduto(produto.id);
                  exibirMensagem(`Produto com código ${code} já cadastrado. Editando produto...`, 'info');
                } else {
                  // Focar no campo de nome para continuar o cadastro
                  nomeInput.focus();
                }
                
                // Fechar modal
                fecharScannerCodigo();
              });
            });
          },
          
          stop: function() {
            if (!scannerAtivo) return;
            
            Quagga.stop();
            scannerAtivo = false;
          }
        };
      }
      
      // Funções para manipular o scanner
      function abrirScannerCodigo() {
        if (!modalScanner) return;
        
        // Exibir modal
        modalScanner.style.display = 'flex';
        
        // Iniciar scanner
        if (barcodeScanner) {
          barcodeScanner.start();
        }
      }
      
      function fecharScannerCodigo() {
        if (!modalScanner) return;
        
        // Parar scanner
        if (barcodeScanner) {
          barcodeScanner.stop();
        }
        
        // Ocultar modal
        modalScanner.style.display = 'none';
      }
      
      // Funções para manipulação de dados
      function carregarGrupos() {
        const grupos = db.getGrupos();
        
        // Limpar opções existentes
        grupoSelect.innerHTML = '';
        
        // Adicionar grupos ao select do formulário
        grupos.forEach(grupo => {
          const option = document.createElement('option');
          option.value = grupo;
          option.textContent = grupo;
          grupoSelect.appendChild(option);
        });
        
        // Limpar opções do filtro (exceto "Todos os Grupos")
        while (filtroGrupoSelect.options.length > 1) {
          filtroGrupoSelect.remove(1);
        }
        
        // Adicionar grupos ao filtro
        grupos.forEach(grupo => {
          const option = document.createElement('option');
          option.value = grupo;
          option.textContent = grupo;
          filtroGrupoSelect.appendChild(option);
        });
      }
      
      function carregarMarcas() {
        const marcas = db.getMarcas();
        
        // Limpar opções existentes
        marcaSelect.innerHTML = '';
        
        // Adicionar opção em branco
        const optionVazia = document.createElement('option');
        optionVazia.value = '';
        optionVazia.textContent = 'Selecione uma marca';
        marcaSelect.appendChild(optionVazia);
        
        // Adicionar marcas
        marcas.forEach(marca => {
          const option = document.createElement('option');
          option.value = marca;
          option.textContent = marca;
          marcaSelect.appendChild(option);
        });
      }
      
      function carregarProdutos() {
        const produtos = db.getProdutos();
        const termoBusca = buscaProdutoInput.value.toLowerCase();
        const grupoSelecionado = filtroGrupoSelect.value;
        
        // Limpar tabela
        const tbody = tabelaProdutos.querySelector('tbody');
        tbody.innerHTML = '';
        
        // Filtrar produtos
        let produtosFiltrados = Object.values(produtos);
        
        if (termoBusca) {
          produtosFiltrados = produtosFiltrados.filter(produto => 
            produto.nome.toLowerCase().includes(termoBusca) || 
            produto.codigo_barras.includes(termoBusca)
          );
        }
        
        if (grupoSelecionado) {
          produtosFiltrados = produtosFiltrados.filter(produto => 
            produto.grupo === grupoSelecionado
          );
        }
        
        // Ordenar por nome
        produtosFiltrados.sort((a, b) => a.nome.localeCompare(b.nome));
        
        // Adicionar à tabela
        produtosFiltrados.forEach(produto => {
          const tr = document.createElement('tr');
          
          tr.innerHTML = `
            <td>${produto.codigo_barras}</td>
            <td>${produto.nome}</td>
            <td>${produto.grupo}</td>
            <td>R$ ${produto.preco.toFixed(2)}</td>
            <td>
              <span class="${produto.estoque <= produto.estoque_minimo ? 'text-danger' : ''}">
                ${produto.estoque}
              </span>
            </td>
            <td>
              <button class="btn btn-outline-primary btn-sm btn-editar" data-id="${produto.id}">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-outline-danger btn-sm btn-excluir" data-id="${produto.id}">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          `;
          
          tbody.appendChild(tr);
        });
        
        // Adicionar eventos aos botões
        document.querySelectorAll('.btn-editar').forEach(btn => {
          btn.addEventListener('click', function() {
            const id = this.getAttribute('data-id');
            editarProduto(id);
          });
        });
        
        document.querySelectorAll('.btn-excluir').forEach(btn => {
          btn.addEventListener('click', function() {
            const id = this.getAttribute('data-id');
            excluirProduto(id);
          });
        });
      }
      
      function novoProduto() {
        // Limpar formulário
        formProduto.reset();
        produtoIdInput.value = '';
        
        // Configurar modo
        modoEdicao = false;
        formTitulo.textContent = 'Novo Produto';
        
        // Valores padrão
        estoqueMinimoInput.value = '5';
      }
      
      function editarProduto(id) {
        const produto = db.getProduto(id);
        
        if (produto) {
          // Preencher formulário
          produtoIdInput.value = produto.id;
          codigoBarrasInput.value = produto.codigo_barras;
          nomeInput.value = produto.nome;
          grupoSelect.value = produto.grupo;
          marcaSelect.value = produto.marca || '';
          precoInput.value = produto.preco;
          estoqueInput.value = produto.estoque;
          estoqueMinimoInput.value = produto.estoque_minimo;
          fotoInput.value = produto.foto || '';
          
          // Configurar modo
          modoEdicao = true;
          formTitulo.textContent = 'Editar Produto';
          
          // Scroll até o formulário em dispositivos móveis
          if (window.innerWidth < 768) {
            cardFormulario.scrollIntoView({ behavior: 'smooth' });
          }
        }
      }
      
      function excluirProduto(id) {
        const produto = db.getProduto(id);
        
        if (produto) {
          const confirmar = confirm(`Deseja realmente excluir o produto "${produto.nome}"?`);
          
          if (confirmar) {
            try {
              db.deletarProduto(id);
              carregarProdutos();
              exibirMensagem('Produto excluído com sucesso', 'success');
            } catch (erro) {
              exibirMensagem('Erro ao excluir produto: ' + erro, 'error');
            }
          }
        }
      }
      
      function salvarProduto(e) {
        e.preventDefault();
        
        // Validar código de barras
        if (!validarCodigoBarras(codigoBarrasInput.value)) {
          return;
        }
        
        // Obter dados do formulário
        const produto = {
          id: produtoIdInput.value,
          codigo_barras: codigoBarrasInput.value,
          nome: nomeInput.value,
          grupo: grupoSelect.value,
          marca: marcaSelect.value,
          preco: parseFloat(precoInput.value),
          estoque: parseInt(estoqueInput.value),
          estoque_minimo: parseInt(estoqueMinimoInput.value),
          foto: fotoInput.value
        };
        
        try {
          // Verificar se já existe um produto com o mesmo código de barras (exceto o próprio produto em edição)
          if (!modoEdicao) {
            const produtoExistente = db.getProdutoPorCodigoBarras(produto.codigo_barras);
            if (produtoExistente) {
              exibirMensagem(`Já existe um produto cadastrado com este código de barras: ${produtoExistente.nome}`, 'warning');
              codigoBarrasInput.focus();
              return;
            }
          }
          
          // Salvar produto
          db.salvarProduto(produto);
          
          // Atualizar tabela
          carregarProdutos();
          
          // Limpar formulário
          formProduto.reset();
          produtoIdInput.value = '';
          
          // Resetar modo
          modoEdicao = false;
          formTitulo.textContent = 'Novo Produto';
          
          // Mensagem de sucesso
          exibirMensagem('Produto salvo com sucesso', 'success');
        } catch (erro) {
          exibirMensagem('Erro ao salvar produto: ' + erro, 'error');
        }
      }
      
      function cancelarFormulario() {
        // Limpar formulário
        formProduto.reset();
        produtoIdInput.value = '';
        
        // Resetar modo
        modoEdicao = false;
        formTitulo.textContent = 'Novo Produto';
      }
      
      // Função para gerar código de barras EAN-13 válido
      function gerarCodigoBarras() {
        // Gerar código de 13 dígitos (EAN-13)
        let codigo = '789';  // Prefixo Brasil
        
        // Gerar mais 9 dígitos
        for (let i = 0; i < 9; i++) {
          codigo += Math.floor(Math.random() * 10);
        }
        
        // Calcular dígito verificador
        let soma = 0;
        for (let i = 0; i < 12; i++) {
          soma += parseInt(codigo[i]) * (i % 2 === 0 ? 1 : 3);
        }
        
        const digitoVerificador = (10 - (soma % 10)) % 10;
        
        // Adicionar dígito verificador
        codigo += digitoVerificador;
        
        // Atualizar campo
        codigoBarrasInput.value = codigo;
      }
      
      // Função para validar código de barras EAN
      function validarCodigoBarras(codigo) {
        if (!codigo) return true; // Campo vazio é permitido
        
        // Verificar se contém apenas dígitos
        if (!/^\d+$/.test(codigo)) {
          exibirMensagem('Código de barras deve conter apenas números', 'warning');
          return false;
        }
        
        // Verificar comprimento
        if (codigo.length !== 8 && codigo.length !== 13) {
          exibirMensagem('Código de barras deve ter 8 ou 13 dígitos (EAN-8 ou EAN-13)', 'warning');
          return false;
        }
        
        // Calcular dígito verificador
        const digitosBase = codigo.slice(0, -1);
        const digitoVerificador = parseInt(codigo.slice(-1));
        
        let soma = 0;
        for (let i = 0; i < digitosBase.length; i++) {
          soma += parseInt(digitosBase[i]) * (i % 2 === 0 ? 1 : 3);
        }
        
        const digitoCalculado = (10 - (soma % 10)) % 10;
        
        // Validar dígito verificador
        if (digitoVerificador !== digitoCalculado) {
          exibirMensagem('Código de barras inválido. Dígito verificador incorreto.', 'warning');
          return false;
        }
        
        return true;
      }
      
      function abrirModal(tipo) {
        tipoModal = tipo;
        
        // Configurar modal
        if (tipo === 'grupo') {
          modalTitulo.textContent = 'Adicionar Novo Grupo';
          modalLabel.textContent = 'Nome do Grupo';
        } else {
          modalTitulo.textContent = 'Adicionar Nova Marca';
          modalLabel.textContent = 'Nome da Marca';
        }
        
        // Limpar input
        novoItemInput.value = '';
        
        // Exibir modal
        modalAdicionar.style.display = 'flex';
        
        // Focar no input
        setTimeout(() => {
          novoItemInput.focus();
        }, 100);
      }
      
      function salvarItemModal() {
        const novoItem = novoItemInput.value.trim();
        
        if (novoItem) {
          try {
            if (tipoModal === 'grupo') {
              // Obter grupos atuais
              const grupos = db.getGrupos();
              
              // Verificar se já existe
              if (grupos.includes(novoItem)) {
                exibirMensagem('Este grupo já existe', 'warning');<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Produtos - ORION PDV</title>
  <link rel="stylesheet" href="assets/css/orion-theme.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    /* Estilos específicos para scanner de código de barras */
    #scanner-video {
      width: 100%;
      height: auto;
      max-height: 300px;
      background-color: #000;
      border-radius: var(--border-radius);
    }

    #camera-container {
      position: relative;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .scan-region-highlight {
      border: 2px solid var(--primary);
      position: absolute;
      border-radius: 30px;
    }

    .scan-region-highlight-svg {
      fill: var(--primary);
      fill-opacity: 0.2;
    }

    .toast-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: var(--dark-surface);
      color: var(--text-light);
      padding: 10px 15px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      z-index: 1000;
      transition: var(--transition);
      transform: translateY(100px);
      opacity: 0;
    }

    .toast-notification.show {
      transform: translateY(0);
      opacity: 1;
    }

    .toast-success {
      border-left: 4px solid var(--success);
    }

    .toast-warning {
      border-left: 4px solid var(--warning);
    }

    .toast-error {
      border-left: 4px solid var(--danger);
    }

    .toast-info {
      border-left: 4px solid var(--info);
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <img src="assets/img/logo.png" alt="ORION PDV">
        <span class="logo-text">ORION PDV</span>
      </div>
      
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="dashboard.html" class="nav-link">
            <i class="fas fa-tachometer-alt nav-icon"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="venda.html" class="nav-link">
            <i class="fas fa-shopping-cart nav-icon"></i>
            <span>Registrar Venda</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="produto.html" class="nav-link active">
            <i class="fas fa-box nav-icon"></i>
            <span>Cadastrar Produto</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="cliente.html" class="nav-link">
            <i class="fas fa-user nav-icon"></i>
            <span>Cadastrar Cliente</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="relatorio.html" class="nav-link">
            <i class="fas fa-chart-bar nav-icon"></i>
            <span>Painel Financeiro</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="estoque.html" class="nav-link">
            <i class="fas fa-warehouse nav-icon"></i>
            <span>Gerenciar Estoque</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="config.html" class="nav-link">
            <i class="fas fa-cog nav-icon"></i>
            <span>Configurações</span>
          </a>
        </li>
      </ul>
      
      <div style="margin-top: auto; padding: 1rem 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
        <div style="display: flex; align-items: center; margin-bottom: 1rem;">
          <i class="fas fa-user-circle" style="font-size: 1.5rem; margin-right: 10px;"></i>
          <div>
            <div id="user-name" style="font-weight: 500;">Nome do Usuário</div>
            <small class="text-muted">Administrador</small>
          </div>
        </div>
        <button id="btn-logout" class="btn btn-outline-primary" style="width: 100%;">
          <i class="fas fa-sign-out-alt"></i> Sair
        </button>
      </div>
    </aside>

    <!-- Conteúdo principal -->
    <main class="content">
      <div class="header" style="margin-bottom: 1.5rem;">
        <h1>Cadastro de Produtos</h1>
        <div>
          <span id="current-date"></span>
        </div>
      </div>
      
      <div style="display: grid; grid-template-columns: 1fr 350px; gap: 1.5rem;">
        <!-- Lista de produtos -->
        <div class="card">
          <div class="card-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <i class="fas fa-list"></i> Produtos Cadastrados
              </div>
              <div style="display: flex; gap: 0.5rem;">
                <div class="form-group" style="margin-bottom: 0;">
                  <select id="filtro-grupo" class="form-control" style="width: 150px;">
                    // Verificar se já existe
              if (grupos.includes(novoItem)) {
                exibirMensagem('Este grupo já existe', 'warning');
                return;
              }
              
              // Adicionar novo grupo
              db.adicionarGrupo(novoItem);
              
              // Recarregar grupos
              carregarGrupos();
              
              // Selecionar o novo grupo no formulário
              grupoSelect.value = novoItem;
            } else {
              // Obter marcas atuais
              const marcas = db.getMarcas();
              
              // Verificar se já existe
              if (marcas.includes(novoItem)) {
                exibirMensagem('Esta marca já existe', 'warning');
                return;
              }
              
              // Adicionar nova marca
              db.adicionarMarca(novoItem);
              
              // Recarregar marcas
              carregarMarcas();
              
              // Selecionar a nova marca no formulário
              marcaSelect.value = novoItem;
            }
            
            // Fechar modal
            modalAdicionar.style.display = 'none';
            
            // Exibir mensagem de sucesso
            exibirMensagem(`${tipoModal === 'grupo' ? 'Grupo' : 'Marca'} adicionado com sucesso`, 'success');
          } catch (erro) {
            exibirMensagem(`Erro ao adicionar ${tipoModal}: ${erro}`, 'error');
          }
        }
      }
      
      // Função para exibir mensagens toast
      function exibirMensagem(mensagem, tipo = 'info') {
        // Criar elemento toast
        const toast = document.createElement('div');
        toast.className = `toast-notification toast-${tipo}`;
        toast.innerHTML = mensagem;
        
        // Adicionar ao corpo do documento
        document.body.appendChild(toast);
        
        // Exibir toast
        setTimeout(() => {
          toast.classList.add('show');
        }, 10);
        
        // Remover toast após 3 segundos
        setTimeout(() => {
          toast.classList.remove('show');
          
          // Remover do DOM após a animação
          setTimeout(() => {
            document.body.removeChild(toast);
          }, 300);
        }, 3000);
      }
    });
  </script>
</body>
</html>
